<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Abyssal Puzzle 2 | Abyssal Puzzle Rewind</title>
    <link rel="icon" href="/favicon.ico">
    <style>
        body {
            background-color: black;
            background-size: contain;
            background-repeat: no-repeat;
            margin: 0;
            height: 100vh;
            overflow: hidden;
        }
        .container {
            display: flex;
            justify-content: space-around;
            align-items: center;
            height: 100%;
            padding: 10px;
            box-sizing: border-box;
        }
        .left-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .right-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .image-wrapper {
            position: relative;
            display: inline-block;
            z-index: 1;
        }
        .middle-image, .side-image {
            width: 150px;
            height: 150px;
            cursor: pointer;
            transition: filter 0.3s ease;
            border-radius: 10px;
        }
        .grayscale {
            filter: grayscale(100%) opacity(0.5);
        }
        .highlight {
            border: 3px solid white;
            border-radius: 10px;
        }
        .overlay {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 600px;
            max-height: 500px;
            background-color: rgba(0, 0, 0, 0.95);
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
            z-index: 1000;
            visibility: hidden;
            padding: 20px;
            font-size: 16px;
            line-height: 1.6;
            text-align: center;
            overflow: hidden;
            border: 2px solid white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
        }

        .overlay-content {
            overflow-y: auto;
            overflow-x: hidden;
            width: 100%;
            padding-right: 5px;
            position: relative;
            z-index: 1;
        }

        .overlay p{
            font-size: 16px;
            line-height: 1.6;
            margin: 10px 0;
            text-align: left;
        }

        .overlay h6{
            font-size: 14px;
            line-height: 1.5;
            margin: 10px 0;
        }
        .unlocked {
            filter: blur(0px);
            cursor: default;
        }
        .unlocked .overlay {
            display: none;
        }
        .image-wrapper.active .overlay {
            opacity: 1;
            visibility: visible;
            pointer-events: auto;
        }
        .image-wrapper.active {
            z-index: 100;
        }
        .overlay input {
            width: 80%;
            padding: 12px;
            margin: 10px 0;
            font-size: 16px;
            border: 2px solid #444;
            border-radius: 5px;
            background-color: #222;
            color: white;
            outline: none;
        }
        .overlay input:focus {
            border-color: #666;
        }
        .overlay button {
            padding: 12px 30px;
            margin: 10px 0;
            font-size: 16px;
            background-color: #444;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .overlay button:hover {
            background-color: #666;
        }
        .close-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 20px;
            height: 20px;
            font-size: 16px;
            color: white;
            cursor: pointer;
            background: none;
            border: 1px solid white;
            border-radius: 3px;
            padding: 0;
            margin: 0;
            line-height: 18px;
            text-align: center;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .close-btn:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body>
    <a href="/two/finalpage" target="_blank" style="position: absolute; top: 10px; right: 10px; color: #888; text-decoration: underline; font-size: 14px; z-index: 10;">Abyssal Puzzle Rewind</a>
    <div id="message" style="position: fixed; top: 20px; left: 50%; transform: translateX(-50%); color: #ff4444; font-size: 18px; font-weight: bold; z-index: 2000; display: none; text-shadow: 0 0 5px rgba(0,0,0,0.5);"></div>

    <div class="container">
        <div class="image-wrapper" id="image1">
            <img src="/two/L1.png" alt="å›¾ç‰‡1" class="middle-image grayscale" onclick="toggleOverlay('image1')">
            <div class="overlay">
                <button class="close-btn" onclick="closeOverlay('image1')">&times;</button>
                <div class="overlay-content">
                    <p>é•Œåˆ»æ³•åˆ™:
                        â€¢åƒç´ å¡”ä¸æ–­å´©æºƒ,ä¸¤äººæ‰‹ç‰µæ‰‹èµ°å‘æœ€ç»ˆçš„ç»“å±€.
                    </p>
                    <p>(1)
                        "neumac hignu"
                        æƒ…æ€ï¼Œæªæ€ï¼Œæ—©å¤­
                        çœ‹é‚£ç²‰è‰²å®çŸ³åœ¨æœˆä¸‹é—ªçƒç€å…‰èŠ’ã€‚
                        ä½ æ˜¯è°ï¼Ÿ
                    </p>
                    <p>
                        (2)
                        æ‰¾åˆ°å¥¹æ‰€åœ¨çš„ä½ç½®,å‘ä¸‹èµ°ä¸€å±‚,è¿›å…¥é‚£ä¸€å±‚æ‰€ä»£è¡¨çš„ç« èŠ‚,å¯»æ‰¾å‰å¾€ä¸Šæ–¹å…¶ä»–ç« èŠ‚çš„éšè—å…¥å£,å…¥å£çš„é‚£æ®µæ—‹å¾‹ä¾¿ä¸ºç­”æ¡ˆ.
                    </p>
                    <h6>æ³¨ï¼šå¦‚æœæœ‰å•è¯çš„è¯é¦–å­—æ¯è¯·å¤§å†™</h6>
                    <input type="text" placeholder="è¾“å…¥å¯†é’¥" id="password-image1" onkeypress="handleKeyPress(event, 'image1')">
                    <button onclick="unlockImage('image1')">è§£é”</button>
                </div>
            </div>
        </div>

        <div class="left-group">
            <div class="image-wrapper" id="image3">
                <img src="/two/L3.png" alt="å›¾ç‰‡3" class="side-image grayscale" onclick="toggleOverlay('image3')">
                <div class="overlay">
                    <button class="close-btn" onclick="closeOverlay('image3')">&times;</button>
                    <div class="overlay-content">
                        <p>é•Œåˆ»æ³•åˆ™:
                            â€¢å€¾ç›†å¤§é›¨è½ä¸‹,æ·‹åˆ°é›¨çš„äººä»¬å†ä¹Ÿæ²¡æœ‰é†’æ¥.é›¨ä¸ä¸²è”èµ·æ¥çš„ä¸åªæ˜¯äº‹ç‰©,æ›´æ˜¯æƒ…æ„Ÿ.
                        </p>
                        <p>(1)
                            æ°´æ³¢èˆ¬è¡æ¼¾,å¹´è½®èˆ¬ç¨ å¯†.ç”¨é›¨ä¸å°†çº¿ç´¢è¿èµ·,ä¾¿å¯æ‰¾åˆ°ç­”æ¡ˆ.
                            â€¢ğŸ‘ğŸŒ§ğŸ’ƒğŸ‘ğŸ–±
                            â€¢ğŸ”ğŸ’€ğŸ–±ğŸ‘âœ³ï¸
                            â€¢ğŸ‘ğŸŒ§ğŸ’ƒ
                        </p>
                        <p>(2)
                            Inverted World.
                        </p>
                        <h6>æ³¨ï¼šè‹¥æœ‰å­—æ¯è¯·å¤§å†™</h6>
                        <input type="text" placeholder="è¾“å…¥å¯†é’¥" id="password-image3" onkeypress="handleKeyPress(event, 'image3')">
                        <button onclick="unlockImage('image3')">è§£é”</button>
                    </div>
                </div>
            </div>
            <div class="image-wrapper" id="image2">
                <img src="/two/L2.png" alt="å›¾ç‰‡2" class="side-image grayscale" onclick="toggleOverlay('image2')">
                <div class="overlay">
                    <button class="close-btn" onclick="closeOverlay('image2')">&times;</button>
                    <div class="overlay-content">
                        <p>é•Œåˆ»æ³•åˆ™:
                            ä¸€åˆ‡çš„å¼€ç«¯,æ˜¯å¦‚æ­¤æ‚„æ— å£°æ¯
                            éŸ³è½¨è·ƒåŠ¨,æ—‹å¾‹äº¤ç»‡.ç¼¤çº·éŸ³ä¹ä¹‹æ—…å³å°†å¯ç¨‹.
                        </p>
                        <p>(1)
                            â€¢å¯»æ‰¾åˆ°æ•…äº‹å¯ç¨‹æ—¶æœ€åˆçš„æ—‹å¾‹,å®ƒå¹¶æœªæ¯è,åªæ˜¯è½¬åŒ–ä¸ºäº†ç¼©å†™,å˜æˆäº†ä¸€æŠŠé’¥åŒ™.
                            â€¢(é”),å¤©ç©¹æ°´è“çŠ¹å¦‚é™æµ·,(ä¹±ç ),åƒç´ å¡”å†242å¹´çš„å°¾å£°,ä¸€åˆ‡éƒ½å¥½ä¼¼æ¢¦å¢ƒ.
                            â€¢é•Œåˆ»æ³•åˆ™æš‚æ—¶ç ´ç¢,ç”¨é‚£æŠŠé’¥åŒ™åœ¨å¦ä¸€ä¸ªæ—¶ç©ºæ‰“å¼€é‚£æŠŠé”.
                            ä½ ä¾¿èƒ½å¯»æ‰¾åˆ°å¯¹åº”çš„é‚£ä¸ªæ—‹å¾‹.
                        </p>
                        <p>(2)
                            â€¢é•Œåˆ»æ³•åˆ™å½»åº•ç ´ç¢,å‰å¾€å¦ä¸€ä¾§çš„æ—¶ç©º,æ‰¾åˆ°æ˜Ÿç™½å»è¿‡çš„çš„å¦ä¸€å¤„å¯¹åº”åœ°,å‘å³ç§»åŠ¨ç›´è‡³å¯»æ‰¾åˆ°é˜¿å¤äºšæ˜Ÿç¾éš¾æ‰€åœ¨åœ°.
                        </p>
                        <p>(3)
                            çªç ´è‡ªæˆ‘,æ‰¾åˆ°é‚£æ—‹å¾‹é€Ÿåº¦çš„æé™.
                        </p>
                        <input type="text" placeholder="è¾“å…¥å¯†é’¥" id="password-image2" onkeypress="handleKeyPress(event, 'image2')">
                        <button onclick="unlockImage('image2')">è§£é”</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="image-wrapper" id="image7">
            <img src="/two/middle.png" alt="å›¾ç‰‡7" class="middle-image grayscale" onclick="toggleOverlay('image7')">
            <div class="overlay">
                <button class="close-btn" onclick="closeOverlay('image7')">&times;</button>
                <div class="overlay-content">
                    <p>é•Œåˆ»æ³•åˆ™:
                        â€¢ä½ æ‰€ä»°ä»—çš„ä¸€åˆ‡,éƒ½å°†ç°é£çƒŸç­.è¿™ä¸€ç‚¹,|ç»å¯¹|æ— è¯¯.
                    </p>
                    <p>[æ—‹å¾‹]Metaæ ¸å¿ƒ:
                        æ›²å¸ˆ:(1)
                        éš¾åº¦:(2)
                        è°±å¸ˆ:?
                        éŸ³ä¹æ¸¸æˆ:(3)
                    </p>
                    <p>(1)
                        è´è¶ä¹‹æ¢¦,å¯»æ‰¾ç ´èŒ§çš„å›å¿†.
                    </p>
                    <p>(2)
                        Time:å¤å¾€ä»Šæ¥,è€Œä»Šè€Œå,äº˜å¤ä¸å˜,æ—¶é—´,è¶…ä¹ä½ çš„æƒ³è±¡....
                        Answer=[Time]-20
                    </p>
                    <p>(3)
                        ä¸€åˆ‡æ—‹å¾‹çš„ç‘•ç–µéƒ½å°†ä¼šè¢«å®ƒæ‰€ä¿®å¤.ä»–å°±æ˜¯å±äºå¾‹åŠ¨æ˜Ÿæ‰€æœ‰äººçš„å¼‚æƒ³ä¹‹ç‰©.
                    </p>
                    <p>
                        è‹¥æœ‰ç¬¦å·è¯·ä½¿ç”¨è‹±æ–‡ç¬¦å·ï¼Œç¬¦å·å·¦å³ä¸éœ€è¦ç©ºæ ¼
                    </p>
                    <input type="text" placeholder="è¾“å…¥å¯†é’¥" id="password-image7" onkeypress="handleKeyPress(event, 'image7')">
                    <button onclick="unlockImage('image7')">è§£é”</button>
                </div>
            </div>
        </div>

        <div class="right-group">
            <div class="image-wrapper" id="image5">
                        <img src="/two/R1.png" alt="å›¾ç‰‡5" class="side-image grayscale" onclick="toggleOverlay('image5')">
                        <div class="overlay">
                            <button class="close-btn" onclick="closeOverlay('image5')">&times;</button>
                            <div class="overlay-content">
                                <p>é•Œåˆ»æ³•åˆ™:
                                        â€¢ä¸€ç¼•å’Œè°çš„å…‰èŠ’,æ­£ä¸é‚£éŸ³ä¹çº·äº‰äº¤é”™çš„å¤±è½ä¸–ç•Œä¸­ç­‰å€™ç€ä½ .
                                        tsoqalvmuyc
                                        é‚£å¤©,è…¥çº¢è‰²çš„è¡€æœˆå‡èµ·,ä¸ºè¿™ç‰‡å¤§åœ°ç¬¼ç½©ä¸Šäº†è¯¡å¼‚çš„è‰²å½©.å®ƒæ”¹å˜äº†å¤§å®¶,æ”¹å˜äº†ä¸–ç•Œ.
                                    </p>
                                    <p>(1)
                                        â€¢èŠ±æŸè½ä¸‹,ç’€ç’¨çš„è“å®çŸ³é—ªé—ªå‘å…‰,é‚£æ˜¯ç‹¬å±äºå¥¹çš„åŠ å†•ç¤¼
                                        â€¢å¥¹éœ²å‡ºäº†æ´ç™½çš„æ‰‹è‡‚,åŸæœ¬çš„äº›å°äº®å…‰åŒ–ä¸ºå¤§é‡ç¹æ˜Ÿ,å“­æ³£çš„å·¦çœ¼å˜å¾—çº¢æ¶¦
                                        â€¢æ‘˜ä¸‹é‚£é¡¶å¸½å­,ç´«è‰²çš„é•¿è£™åœ¨å¾®é£ä¸­æ‘†åŠ¨,æ•…äº‹çš„ç»“å±€ç”±æ­¤æ”¹å†™.
                                        â€¢å…­èŠ’æ˜Ÿæ˜¯ä»–ä»¬å‡†ç¡®æ— è¯¯çš„å’Œ.
                                    </p>
                                    <p>(2)
                                        æœˆæ»¡ä¹‹æ—¶,å¥¹ä»¬çš„å¼ºå¤§åˆ°è¾¾äº†é¡¶ç‚¹.
                                        "0"=48
                                        <F S O>
                                        â€¢å…­èŠ’æ˜Ÿ+59 g "7"
                                        â€¢s å…­èŠ’æ˜Ÿ+49 K
                                        æ‰¾åˆ°å¥¹ä»¬çš„å°å®¶.
                                    </p>
                                    <p>(3)
                                        æ‰¾åˆ°é‚£ä¸ªå°å®¶æ•…äº‹å¼€å§‹çš„é‚£å¤©,è®©æ‚²å‰§ä¸å†å‘ç”Ÿ,å½’ä¸ºæ˜¯ä¸å¦çš„ç»ˆæ­¢.
                                        æ‰¾åˆ°é‚£æŠŠé’¥åŒ™,æ—¶ç©ºæµè½¬,é•Œåˆ»æ³•åˆ™ç ´ç¢,å¥¹æ‰€åœ¨çš„åœ°æ–¹,åœ¨ä½ çš„ä¸‹ä¸€ä¸ªç›®çš„åœ°.æ‰¾åˆ°å¥¹,å¿µå‡ºå¥¹æ‰€ç«™ç«‹çš„åœ°æ–¹.
                                    </p>
                                    <h6>æ³¨ï¼šè‹¥æœ‰å•è¯å¼€å¤´è¯·å¤§å†™</h6>
                                    <input type="text" placeholder="è¾“å…¥å¯†é’¥" id="password-image5" onkeypress="handleKeyPress(event, 'image5')">
                                    <button onclick="unlockImage('image5')">è§£é”</button>
                                </div>
                            </div>
                        </div><div class="image-wrapper" id="image6">
            <img src="/two/R2.png" alt="å›¾ç‰‡6" class="side-image grayscale" onclick="toggleOverlay('image6')">
            <div class="overlay">
                <button class="close-btn" onclick="closeOverlay('image6')">&times;</button>
                <div class="overlay-content">
                    <p>é•Œåˆ»æ³•åˆ™:
                            â€¢æ£‹ç›˜ä¸Šçš„äº¤é”‹,æ°¸å¤œåŸçš„é»æ˜,ç©¿è¿‡è¿·å®«,å…‰ä¸æš—äº¤ç»‡åœ¨æ•…äº‹çš„å§‹ä¸æœ«.
                        </p>
                        <p>(1)
                            â€¢ç‰¹æ®Šçš„ç®±åº­è½®å›,æ‰¾åˆ°ä¸ºå¥¹é“ºå±•ç”»å·çš„äºº.å¸¦ç€é‚£ä¸ªäººå›åˆ°ä¸Šä¸€å±‚çš„æ—¶ç©º,åœ¨å›å¿†æ¡£æ¡ˆé¦†é‡Œæ‰¾åˆ°é‚£ä¸ªäººçš„<2 16 13>.
                            â€¢å¸¦ç€é‚£ä¸ªäººçš„(<2 16 13>+17)å‰å¾€è¿·å®«æ‰¾åˆ°å½±å­.
                        </p>
                        <p>(2)
                            å½±å­å·¦è¾¹åˆ»ç€è°œé¢˜:
                            Purple+Green-Orange=x
                            x++
                        </p>
                        <p>(3)
                            åœ¨CPxä¸­çš„redé‡Œ,ä½ ä¼šæ‰¾åˆ°çªç ´æ—¶ç©ºçš„ç­”æ¡ˆ.
                        </p>
                        <input type="text" placeholder="è¾“å…¥å¯†é’¥" id="password-image6" onkeypress="handleKeyPress(event, 'image6')">
                        <button onclick="unlockImage('image6')">è§£é”</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="image-wrapper" id="image4">
            <img src="/two/R3.png" alt="å›¾ç‰‡4" class="middle-image grayscale" onclick="toggleOverlay('image4')">
            <div class="overlay">
                <button class="close-btn" onclick="closeOverlay('image4')">&times;</button>
                <div class="overlay-content">
                    <p>é•Œåˆ»æ³•åˆ™:
                        â€¢å¾€äº‹é‡ç°,ä¸€ç¾¤å°‘å¥³åœ¨è·‘é“ä¸ŠæŠ«è†æ–©æ£˜,å†²å‘æ•…äº‹çš„å½¼å²¸.
                    </p>
                    <p>(1)
                        å¥¹,
                        â€¢æ›²æŠ˜çš„å‘½è¿é‡æ¼”,é»‘ç™½ç›¸é—´çš„å­—å¹•é¢„ç¤ºç€å‘½è¿çš„ç»ˆç»“.
                        â€¢ä»æ‹‰å¯å¼¥æ‹‰çš„åºåˆ—å¼€å§‹è¡°å‡,ç›´åˆ°1ä¸ºå°½å¤´.
                        â€¢ç©¿é€æ—¶ç©ºçš„äººå£°,è¢«å†å²é“­è®°.
                    </p>
                    <p>(2)
                        å¥¹è’™ä¸Šå†å²çš„å°˜åŸƒ,å´æœ‰æ–°ç”Ÿä¸ºä»–è‡´æ•¬
                        â€¢BOF:14 20
                        æ‰¾åˆ°ä¸ºä»–è‡´æ•¬çš„æ–°ç”Ÿ.
                    </p>
                    <p>(3)
                        â€¢éšè—äºå¹½å†¥ä¹‹ä¸­çš„éš¾åº¦ä¹ç°,å¿µå‡ºå®ƒçš„åå­—,ä¾¿å¯ç ´é™¤æ—¶ç©ºéšœç¢.
                    </p>
                    <input type="text" placeholder="è¾“å…¥å¯†é’¥" id="password-image4" onkeypress="handleKeyPress(event, 'image4')">
                    <button onclick="unlockImage('image4')">è§£é”</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let encryptedKeysData; 

        fetch('/two/keys.json')
            .then(response => response.json()) 
            .then(data => {
                encryptedKeysData = data.imageKeys; 
                init(); 
            })
            .catch(error => console.error('åŠ è½½ keys.json å‡ºé”™:', error)); // é”™è¯¯å¤„ç†

        function init() { // åˆå§‹åŒ–å‡½æ•°ï¼Œåœ¨å¯†é’¥åŠ è½½å®Œæˆåè°ƒç”¨
            const unlockOrder = ['image1', 'image2', 'image3', 'image4', 'image5', 'image6', 'image7'];
            let currentStep = 0;

            function showMessage(text) {
                const msg = document.getElementById('message');
                msg.textContent = text;
                msg.style.display = 'block';
                setTimeout(() => {
                    msg.style.display = 'none';
                }, 2000);
            }

            function toggleOverlay(imageId) {
                const wrapper = document.getElementById(imageId);
                const overlay = wrapper.querySelector('.overlay');

                if (wrapper.classList.contains('unlocked') || unlockOrder[currentStep] === imageId) {
                    if (wrapper.classList.contains('active')) {
                        // å…³é—­æ—¶ä½¿ç”¨æ·¡å‡ºåŠ¨ç”»
                        overlay.style.opacity = '0';
                        overlay.style.visibility = 'hidden';
                        wrapper.classList.remove('active');
                    } else {
                        // æ‰“å¼€æ—¶ä½¿ç”¨æ·¡å…¥åŠ¨ç”»
                        wrapper.classList.add('active');
                        overlay.style.opacity = '1';
                        overlay.style.visibility = 'visible';
                        const input = wrapper.querySelector('input');
                        input && input.focus();
                    }
                } else {
                    showMessage(`è¯·å…ˆè§£é”å›¾åƒï¼š${unlockOrder[currentStep]}`);
                }
            }

            function unlockImage(imageId) {
                const input = document.getElementById(`password-${imageId}`);
                const enteredKey = input.value;
                const correctKey = encryptedKeysData[imageId]; // ä»åŠ è½½çš„ JSON æ•°æ®ä¸­è·å–å¯†é’¥

                if (imageId === unlockOrder[currentStep]) {
                  if (enteredKey === correctKey) {
                        const wrapper = document.getElementById(imageId);
                        input.style.borderColor = '#4CAF50';
                        input.style.backgroundColor = '#1a5f20';
                        input.value = 'å¯†é’¥æ­£ç¡®';
                        input.disabled = true;
                        setTimeout(() => {
                            wrapper.classList.add('unlocked');
                            const overlay = wrapper.querySelector('.overlay');
                            overlay.style.opacity = '0';
                            overlay.style.visibility = 'hidden';
                            wrapper.classList.remove('active');
                            currentStep++;
                            input.disabled = false;
                            input.value = '';
                            input.style.borderColor = '#444';
                            input.style.backgroundColor = '#222';
                            updateImageStates();
                            if (imageId === 'image7') {
                                window.location.href = '/two/newpage';
                            }
                        }, 500);
                    } else {
                        input.style.borderColor = '#f44336';
                        input.style.backgroundColor = '#5f1a1a';
                        input.value = 'å¯†é’¥é”™è¯¯';
                        setTimeout(() => {
                            input.value = '';
                            input.style.borderColor = '#444';
                            input.style.backgroundColor = '#222';
                        }, 1000);
                    }
                }
            }

            function updateImageStates() {
                unlockOrder.forEach((imageId, index) => {
                    const imageWrapper = document.getElementById(imageId);
                    const image = imageWrapper.querySelector('img');
                    if (index < currentStep) {
                        image.classList.remove('grayscale');
                        image.classList.remove('highlight');
                    } else if (index === currentStep) {
                        image.classList.add('grayscale');
                        image.classList.add('highlight');
                    } else {
                        image.classList.add('grayscale');
                        image.classList.remove('highlight');
                    }
                });
            }

            updateImageStates();

            function handleKeyPress(event, imageId) {
                if (event.key === 'Enter') {
                    unlockImage(imageId);
                }
            }

            function closeOverlay(imageId) {
                const wrapper = document.getElementById(imageId);
                const overlay = wrapper.querySelector('.overlay');
                overlay.style.opacity = '0';
                overlay.style.visibility = 'hidden';
                wrapper.classList.remove('active');
            }

            // ç»‘å®šå‡½æ•°åˆ°å…¨å±€ä½œç”¨åŸŸï¼Œä»¥ä¾¿åœ¨ HTML ä¸­è°ƒç”¨
            window.toggleOverlay = toggleOverlay;
            window.unlockImage = unlockImage;
            window.handleKeyPress = handleKeyPress;
            window.closeOverlay = closeOverlay;
        }

    </script>
</body>
</html>
